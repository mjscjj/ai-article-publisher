# TODO: 智能热点选题引擎升级规划 (V4)

## 📌 目标
将当前的“粗筛+大模型盲审”机制，升级为**“双轨漏斗动态打分系统”**，彻底解决 AI 选题缺乏网感、难以命中爆款痛点的问题。

## 💡 迭代设计：双轨漏斗打分法

### 阶段一：物理热度算法计算（快速漏斗）
不再只依赖大语言模型盲审，引入传统舆情计算的公式，过滤出真正的突发焦点。

*   **公式架构**：类似 Hacker News 算法改良版
    *   `综合热度 (Score) = (互动量特征 + 传播范围特征) / (距今时间 + 2)^衰减引力系数`
*   **平台权重融合**：
    *   `Hot_Score = (B站指数 * 0.3) + (微博热度 * 0.4) + (知乎热榜倒数 * 0.3)`
    *   *注：如果一个词在 12 小时内，以上三个平台的综合热度都突破了设定阈值，则自动将其送入第二层漏斗。*

### 阶段二：大模型“观点割裂度 / 情绪极化”打分（灵魂鉴定）
AI 文章要爆，关键在于话题的**争议性**。

*   **执行动作**：
    1.  针对物理漏斗跑出的前 N 个热词，触发评论爬虫（神评嗅探器）。
    2.  抓取该热点下点赞最高的 50 条“野生神评”。
    3.  将这 50 条评论打包发给 Kimi-2.5 评估。
*   **大模型评分逻辑**：
    *   **计算 `Controversy Factor` (争议系数，1-10分)**。
    *   **判定标准**：如果评论区一致叫好/默哀（“好人一生平安”），得 1 分（不值得再展开写文章）；如果评论区分裂成严重的阵营对立（如男女、劳资、代际），且言辞激烈，得 10 分（写了必爆）。
    *   **信息熵与半衰期**：额外评估该事件是一日游八卦，还是牵涉到行业深水区的长尾话题。

### 阶段三：提取素材与挂载弹药包（衔接写作模块）
热搜词只是线头，必须挂载弹药后才能喂给写作大模型。

*   **最终输出 `Topic_Config` JSON结构示例**：
    ```json
    {
        "hot_word": "三亚教师考编被开除",
        "angle": "底层青年在体制内外的横跳与契约精神的异化",
        "controversy_score": 9.5,
        "user_emotions": [
            "凭什么限制人往高处走（支持方观点）", 
            "签了协议就要遵守，乡镇留不住人就是这种人害的（反对方观点）"
        ],
        "required_elements": ["必须引用一条最具代表性的打工人的神评开头"]
    }
    ```
*   将上述完善丰满的“弹药包”传给 `pipeline_v3.py`，确保最终文章带着“原生态的烟火气与撕裂感”。

---
*记录时间：2026-02-25*
*由 OpenClaw Agent 深度调研后整理*
