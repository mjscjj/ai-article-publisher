# 数据源整合方案

> 更新时间: 2026-02-23 02:58
> 负责人: AI Article Publisher Agent

---

## 📊 当前数据源状态

### 已采集数据

| 来源 | 数量 | 状态 |
|------|------|------|
| RSSHub 扩展采集 | 252 条 | ✅ 今日采集 |
| 历史热点数据 | 6,808 条 | ✅ 已存储 |
| 每日文件 | 4 个 | ✅ 正常 |

### 成功的数据源 (11个)

| 平台 | 分类 | 数量 |
|------|------|------|
| 知乎热榜 | 综合 | 30 |
| Hacker News | 科技 | 30 |
| IT之家 | 科技 | 12 |
| 少数派 | 科技 | 10 |
| InfoQ | 科技 | 30 |
| 36氪快讯 | 财经 | 20 |
| 华尔街见闻 | 财经 | 34 |
| 财新网 | 财经 | 10 |
| 豆瓣电影 | 娱乐 | 41 |
| Nature | 学术 | 25 |
| V2EX | 科技 | 10 |

### 待修复的数据源 (14个)

RSSHub 部分路由返回 503 错误，需要:
- 微博热议
- 百度贴吧
- 今日头条
- GitHub Trending
- 掘金热榜
- ProductHunt
- Reddit
- 等等

---

## 🚀 数据源扩展方案

### 方案 1: DailyHotApi 本地部署

**GitHub**: https://github.com/imsyy/DailyHotApi

**支持平台** (40+ 个):
- 视频平台: B站、抖音、快手、AcFun
- 社交媒体: 微博、知乎、百度、豆瓣
- 科技资讯: 少数派、IT之家、掘金、CSDN
- 财经新闻: 36氪、虎嗅、澎湃新闻
- 更多...

**部署状态**: 🔄 正在构建 Docker 镜像

**本地端口**: 6688

### 方案 2: RSSHub 路由优化

**已部署**: localhost:1200

**优化方向**:
1. 添加 Puppeteer 支持动态页面
2. 配置代理访问国内网站
3. 自定义路由规则

### 方案 3: 自建爬虫

**目标平台**:
- 小红书热门 (需要登录)
- 微信公众号爆款 (wemp-operator)
- 今日头条热榜
- 百度热榜

---

## 📋 数据采集策略

### 采集频率

| 类型 | 频率 | 数据源 |
|------|------|--------|
| 热榜热词 | 每 30 分钟 | 微博、知乎、百度 |
| 科技资讯 | 每 1 小时 | HN、GitHub、V2EX |
| 财经新闻 | 每 2 小时 | 36氪、华尔街见闻 |
| 娱乐内容 | 每 3 小时 | 豆瓣、B站 |
| 学术论文 | 每天 | Nature、Science |

### 数据存储

```
data/hotnews/
├── index.json              # 总索引
├── daily/                  # 按日期存储
│   ├── 2026-02-23.json
│   ├── 2026-02-23_extended.json
│   └── 2026-02-23_dailyhot.json
├── by_source/              # 按来源存储
│   ├── zhihu.json
│   ├── weibo.json
│   └── ...
└── extended_sources.json   # 扩展源配置
```

### 数据去重

- 基于 `title` 进行 MD5 去重
- 同一标题 24 小时内只保留一条
- 合并多源重复内容

---

## 🔄 采集器文件

| 文件 | 功能 | 状态 |
|------|------|------|
| `sources/extended_collectors_v2.py` | RSSHub 扩展采集 | ✅ 可用 |
| `sources/dailyhot_collector.py` | DailyHotApi 采集 | ✅ 已创建 |
| `hotnews_storage.py` | 数据存储系统 | ✅ 可用 |
| `extended_sources.py` | 原始扩展源 | ✅ 可用 |

---

## 📊 目标

| 指标 | 当前 | 目标 |
|------|------|------|
| 数据源数量 | 29 | 60+ |
| 日均数据量 | 250 条 | 1000+ 条 |
| 采集成功率 | 44% | 90%+ |
| 视频数据源 | 0 | 10+ |
| 图文数据源 | 0 | 5+ |

---

## ⚠️ 注意事项

1. **频率限制**: 控制请求频率，避免被封
2. **数据隔离**: 不同采集器独立运行
3. **错误处理**: 记录失败源，定期重试
4. **存储优化**: 定期清理过期数据

---

---

## ✅ 已完成功能

### 数据采集系统

| 模块 | 状态 | 数据量 |
|------|------|--------|
| DailyHotApi | ✅ 运行中 | 1139 条/日 |
| RSSHub 扩展 | ✅ 运行中 | 252 条/日 |
| 热词采集 | ✅ 运行中 | 547 词/日 |
| 统一采集 | ✅ 已配置 | 自动合并 |

### Docker 服务

| 服务 | 端口 | 状态 |
|------|------|------|
| DailyHotApi | 6688 | ✅ 运行中 |
| RSSHub | 1200 | ✅ 运行中 |
| Browserless | 3000 | ✅ 运行中 |

### 定时任务

| 任务 | 频率 | 状态 |
|------|------|------|
| DailyHotApi 采集 | 每小时 | ✅ |
| 统一采集合并 | 每6小时 | ✅ |
| 热点日报 | 每天 8:00 | ✅ |
| 数据清理 | 每周日 | ✅ |

---

## 📊 系统状态 (2026-02-23)

```
总热点数: 7,410+
今日采集: 1,391 条
数据源: 85+ 个平台
成功率: 94%
```

---

*持续更新中...*