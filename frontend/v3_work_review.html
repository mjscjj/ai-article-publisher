<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V3 Â∑•‰Ωú Review</title>
    <link rel="stylesheet" href="css/v3-design-tokens.css">
    <link rel="stylesheet" href="css/v3-unified.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="app" class="v3-layout">
        <!-- È°∂ÈÉ®ÂØºËà™ -->
        
        <!-- Áªü‰∏ÄÂØºËà™Ê†è -->
        <nav class="v3-navbar" role="navigation" aria-label="‰∏ªÂØºËà™Ê†è">
            <!-- Logo + ÂìÅÁâåÂêç -->
            <a href="v3_portal.html" class="v3-navbar-brand">
                <span class="v3-navbar-brand-logo">üìù</span>
                <span class="v3-navbar-brand-label">Â∑•‰Ωú Review</span>
            </a>

            <!-- Ê®°ÂùóÂàáÊç¢ËèúÂçï -->
            <div class="v3-navbar-nav">
                <a href="v3_portal.html" class="v3-navbar-link" data-module="portal">Èó®Êà∑</a>
                <a href="v3_coordinator.html" class="v3-navbar-link" data-module="coordinator">ÂçèË∞É</a>
                <a href="v3_workflow.html" class="v3-navbar-link" data-module="workflow">Â∑•‰ΩúÊµÅ</a>
                <a href="v3_publish_center.html" class="v3-navbar-link" data-module="publish">ÂèëÂ∏É</a>
                <a href="v3_writing_factory.html" class="v3-navbar-link" data-module="writing">ÂÜô‰Ωú</a>
                <a href="v3_data_dashboard.html" class="v3-navbar-link " data-module="dashboard">Êï∞ÊçÆ</a>
            </div>

            <!-- Âè≥‰æßÊìç‰ΩúÂå∫ -->
            <div class="v3-navbar-actions">
                <!-- ÈÄöÁü•‰∏≠ÂøÉ -->
                <div class="v3-navbar-notification" role="button" tabindex="0" aria-label="ÈÄöÁü•‰∏≠ÂøÉ">
                    <svg class="v3-navbar-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="v3-notification-badge" data-count="3">3</span>
                </div>

                <!-- ‰∏ªÈ¢òÂàáÊç¢ -->
                <button class="v3-navbar-theme-toggle" onclick="V3.Theme.toggle()" aria-label="ÂàáÊç¢‰∏ªÈ¢ò" title="ÂàáÊç¢Êòé/Êöó‰∏ªÈ¢ò">
                    <svg class="v3-theme-icon v3-theme-icon-light" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
                    </svg>
                    <svg class="v3-theme-icon v3-theme-icon-dark" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>

                <!-- Áî®Êà∑ËèúÂçï -->
                <div class="v3-navbar-user" role="button" tabindex="0" aria-haspopup="menu" aria-label="Áî®Êà∑ËèúÂçï">
                    <div class="v3-navbar-user-avatar" id="navbar-user-avatar">A</div>
                    <div class="v3-navbar-user-info">
                        <span class="v3-navbar-user-name" id="navbar-user-name">Admin</span>
                        <span class="v3-navbar-user-role" id="navbar-user-role">ÁÆ°ÁêÜÂëò</span>
                    </div>
                    <svg class="v3-navbar-chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m6 9 6 6 6-6"></path>
                    </svg>

                    <!-- ‰∏ãÊãâËèúÂçï -->
                    <div class="v3-user-dropdown" role="menu">
                        <a href="/profile" class="v3-dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            ‰∏™‰∫∫‰∏≠ÂøÉ
                        </a>
                        <a href="/settings" class="v3-dropdown-item" role="menuitem">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            ËÆæÁΩÆ
                        </a>
                        <div class="v3-dropdown-divider"></div>
                        <button class="v3-dropdown-item v3-dropdown-logout" role="menuitem" onclick="V3.User.logout()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            ÈÄÄÂá∫ÁôªÂΩï
                        </button>
                    </div>
                </div>

                <!-- ÁßªÂä®Á´ØÊ±âÂ†°ËèúÂçï -->
                <button class="v3-navbar-menu-toggle" aria-label="ËèúÂçï" aria-expanded="false">
                    <span class="v3-menu-bar"></span>
                    <span class="v3-menu-bar"></span>
                    <span class="v3-menu-bar"></span>
                </button>
            </div>
        </nav>


        <!-- ‰æßËæπÊ†è -->
        
        <!-- Áªü‰∏Ä‰æßËæπÊ†è -->
        <aside class="v3-sidebar" role="navigation" aria-label="‰æßËæπÂØºËà™">
            <div class="v3-sidebar-content">
                <!-- ‰æßËæπÊ†èÂàáÊç¢ÊåâÈíÆ -->
                <button class="v3-sidebar-collapse-btn" onclick="V3.Sidebar.toggle()" aria-label="ÊäòÂè†‰æßËæπÊ†è" title="ÊäòÂè†/Â±ïÂºÄ">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>

                <!-- ‰∏ªÂØºËà™ËèúÂçï -->
                <div class="v3-sidebar-section">
                    <h3 class="v3-sidebar-title">‰∏ªËèúÂçï</h3>
                    <nav class="v3-sidebar-menu">
                        <a href="v3_portal.html" class="v3-sidebar-item" data-module="portal">
                            <span class="v3-sidebar-item-icon">üè†</span>
                            <span class="v3-sidebar-item-label">Èó®Êà∑È¶ñÈ°µ</span>
                        </a>
                        <a href="v3_coordinator.html" class="v3-sidebar-item" data-module="coordinator">
                            <span class="v3-sidebar-item-icon">ü§ñ</span>
                            <span class="v3-sidebar-item-label">Êô∫ËÉΩÂçèË∞É</span>
                        </a>
                        <a href="v3_workflow.html" class="v3-sidebar-item" data-module="workflow">
                            <span class="v3-sidebar-item-icon">üîÑ</span>
                            <span class="v3-sidebar-item-label">Â∑•‰ΩúÊµÅ</span>
                        </a>
                        <a href="v3_publish_center.html" class="v3-sidebar-item" data-module="publish">
                            <span class="v3-sidebar-item-icon">üì§</span>
                            <span class="v3-sidebar-item-label">ÂèëÂ∏É‰∏≠ÂøÉ</span>
                        </a>
                        <a href="v3_writing_factory.html" class="v3-sidebar-item" data-module="writing">
                            <span class="v3-sidebar-item-icon">‚úçÔ∏è</span>
                            <span class="v3-sidebar-item-label">ÂÜô‰ΩúÂ∑•ÂéÇ</span>
                        </a>
                        <a href="v3_data_dashboard.html" class="v3-sidebar-item " data-module="dashboard">
                            <span class="v3-sidebar-item-icon">üìä</span>
                            <span class="v3-sidebar-item-label">Êï∞ÊçÆÁúãÊùø</span>
                        </a>
                    </nav>
                </div>

                <!-- È°µÈù¢ÁâπÂÆöËèúÂçï -->
                <div class="v3-sidebar-section">
                    <h3 class="v3-sidebar-title">Â∑•‰Ωú Review</h3>
                    <nav class="v3-sidebar-menu">
                        
                        <a href="#" class="v3-sidebar-item active">
                            <span class="v3-sidebar-item-icon">üìù</span>
                            <span class="v3-sidebar-item-label">Review ÂàóË°®</span>
                        </a>
                        <a href="#" class="v3-sidebar-item">
                            <span class="v3-sidebar-item-icon">üìÖ</span>
                            <span class="v3-sidebar-item-label">Review ËÆ°Âàí</span>
                        </a>
                        <a href="#" class="v3-sidebar-item">
                            <span class="v3-sidebar-item-icon">üìã</span>
                            <span class="v3-sidebar-item-label">ÂèçÈ¶àÊ±áÊÄª</span>
                        </a>

                    </nav>
                </div>

                <!-- ÊúÄËøëËÆøÈóÆ -->
                <div class="v3-sidebar-section">
                    <div class="v3-sidebar-header">
                        <h3 class="v3-sidebar-title">ÊúÄËøëËÆøÈóÆ</h3>
                        <button class="v3-sidebar-clear-btn" onclick="V3.Sidebar.clearRecent()" aria-label="Ê∏ÖÁ©∫ÊúÄËøëËÆøÈóÆ">Ê∏ÖÁ©∫</button>
                    </div>
                    <nav class="v3-sidebar-menu" id="v3-sidebar-recent">
                        <!-- Âä®ÊÄÅÁîüÊàê -->
                    </nav>
                </div>

                <!-- Á≥ªÁªüÁä∂ÊÄÅ -->
                <div class="v3-sidebar-section">
                    <h3 class="v3-sidebar-title">Á≥ªÁªüÁä∂ÊÄÅ</h3>
                    <div class="v3-sidebar-status">
                        <div class="v3-sidebar-status-item">
                            <span class="v3-sidebar-status-label">ÊúçÂä°Áä∂ÊÄÅ</span>
                            <span class="v3-status-indicator">
                                <span class="v3-status-dot success"></span>
                                <span>ËøêË°å‰∏≠</span>
                            </span>
                        </div>
                        <div class="v3-sidebar-status-item">
                            <span class="v3-sidebar-status-label">‰ªäÊó•‰ªªÂä°</span>
                            <span class="v3-sidebar-status-value" id="sidebar-task-count">12</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>


        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="v3-main">
            <div class="v3-content">

        <!-- Áªü‰∏ÄÈù¢ÂåÖÂ±ëÂØºËà™ -->
        <nav class="v3-breadcrumb" aria-label="Èù¢ÂåÖÂ±ëÂØºËà™">
            <ol class="v3-breadcrumb-list">
                <li class="v3-breadcrumb-item">
                    <a href="v3_portal.html" class="v3-breadcrumb-link">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        <span>È¶ñÈ°µ</span>
                    </a>
                </li>
                <li class="v3-breadcrumb-item">
                    <span class="v3-breadcrumb-link">Â∑•‰Ωú Review</span>
                </li>
            </ol>
            <div class="v3-breadcrumb-actions">
                <button class="v3-breadcrumb-action-btn" onclick="window.location.reload()" aria-label="Âà∑Êñ∞" title="Âà∑Êñ∞">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg>
                </button>
                <button class="v3-breadcrumb-action-btn" onclick="V3.Breadcrumb.share()" aria-label="ÂàÜ‰∫´" title="ÂàÜ‰∫´ÂΩìÂâçÈ°µ">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                </button>
            </div>
        </nav>

                <!-- Èù¢ÂåÖÂ±ë -->
                <div class="v3-breadcrumbs v3-mb-md">
                    <span style="display:flex;align-items:center;gap:8px;">
                        <a href="v3_portal.html" class="v3-text-primary">Èó®Êà∑</a>
                        <span class="v3-text-gray">/</span>
                        <span class="v3-font-medium">Â∑•‰Ωú Review</span>
                    </span>
                </div>

                <!-- ÁªüËÆ°Âç°Áâá -->
                <div class="v3-grid v3-grid-5 v3-mb-lg">
                    <div class="v3-stat-card"><div class="v3-stat-label">Âπ≥ÂùáËØÑÂàÜ</div><div class="v3-stat-value" :class="getScoreColor(avgScore)">{{ avgScore }}</div></div>
                    <div class="v3-stat-card"><div class="v3-stat-label">‰ª£Á†ÅË¥®Èáè</div><div class="v3-stat-value" :class="getScoreColor(codeScore)">{{ codeScore || '-' }}</div></div>
                    <div class="v3-stat-card"><div class="v3-stat-label">ÊñáÊ°£Ë¥®Èáè</div><div class="v3-stat-value" :class="getScoreColor(docScore)">{{ docScore || '-' }}</div></div>
                    <div class="v3-stat-card"><div class="v3-stat-label">È°πÁõÆËøõÂ∫¶</div><div class="v3-stat-value" :class="getScoreColor(progressScore)">{{ progressScore || '-' }}</div></div>
                    <div class="v3-stat-card"><div class="v3-stat-label">ÊµãËØïË¶ÜÁõñ</div><div class="v3-stat-value" :class="getScoreColor(testScore)">{{ testScore || '-' }}</div></div>
                </div>

                <!-- Review ÁªìÊûú -->
                <div v-if="currentResult" class="v3-card v3-mb-lg">
                    <div class="v3-card-header">
                        <div>
                            <h3 class="v3-card-title">üöÄ ÂÖ®Èù¢ Review</h3>
                            <p class="v3-text-sm v3-text-gray">Review Êó∂Èó¥Ôºö{{ formatTime(currentResult.reviewed_at) }}</p>
                        </div>
                        <div class="text-right">
                            <div class="v3-text-4xl v3-font-bold" :class="getScoreColor(currentResult.total_score)">{{ currentResult.total_score }}</div>
                            <div class="v3-text-lg v3-font-semibold" :class="getScoreColor(currentResult.total_score)">{{ currentResult.grade }}Á∫ß - {{ currentResult.recommendation }}</div>
                        </div>
                    </div>
                    <div class="v3-card-body">
                        <div v-if="currentResult.sub_reviews" class="v3-grid v3-grid-4 v3-mb-lg">
                            <div v-for="(sub, key) in currentResult.sub_reviews" :key="key" class="v3-p-md v3-rounded v3-border">
                                <div class="v3-text-sm v3-text-gray v3-mb-sm">{{ getSubReviewName(key) }}</div>
                                <div class="v3-text-2xl v3-font-bold" :class="getScoreColor(sub.total_score)">{{ sub.total_score }}</div>
                                <div class="v3-text-xs">{{ sub.grade }}Á∫ß</div>
                            </div>
                        </div>
                        <div class="v3-grid v3-grid-2 v3-gap-lg">
                            <div><h4 class="v3-font-semibold v3-mb-md">‚úÖ ‰ºòÁÇπ</h4><ul class="v3-list-disc v3-pl-md"><li v-for="(s, i) in currentResult.overall_strengths" :key="i" class="v3-text-sm">{{ s }}</li></ul></div>
                            <div><h4 class="v3-font-semibold v3-mb-md">üí° ÊîπËøõÂª∫ËÆÆ</h4><ul class="v3-list-disc v3-pl-md"><li v-for="(s, i) in currentResult.overall_improvements" :key="i" class="v3-text-sm">{{ s }}</li></ul></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/v3-common.js"></script>
    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    reviewing: false,
                    currentResult: null,
                    scores: { code: 85, doc: 80, progress: 75, test: 70 }
                }
            },
            computed: {
                avgScore() { return Math.round((this.codeScore + this.docScore + this.progressScore + this.testScore) / 4); },
                codeScore() { return this.currentResult?.sub_reviews?.code?.total_score || this.scores.code; },
                docScore() { return this.currentResult?.sub_reviews?.documentation?.total_score || this.scores.doc; },
                progressScore() { return this.currentResult?.sub_reviews?.progress?.total_score || this.scores.progress; },
                testScore() { return this.currentResult?.sub_reviews?.tests?.total_score || this.scores.test; }
            },
            methods: {
                async runComprehensiveReview() {
                    this.reviewing = true;
                    setTimeout(() => {
                        this.currentResult = {
                            review_type: 'comprehensive',
                            total_score: 78,
                            grade: 'B',
                            recommendation: 'ÊåÅÁª≠ÊîπËøõ',
                            reviewed_at: new Date().toISOString(),
                            sub_reviews: {
                                code: { total_score: 85, grade: 'A' },
                                documentation: { total_score: 80, grade: 'A' },
                                progress: { total_score: 75, grade: 'B' },
                                tests: { total_score: 70, grade: 'B' }
                            },
                            overall_strengths: ['‰ª£Á†ÅËßÑËåÉËâØÂ•Ω', 'ÊñáÊ°£ÂÆåÊï¥', 'ËøõÂ∫¶ÂèØÊéß'],
                            overall_improvements: ['ÊµãËØïË¶ÜÁõñÁéáÈúÄÊèêÂçá', 'ÊÄßËÉΩ‰ºòÂåñÁ©∫Èó¥']
                        };
                        this.reviewing = false;
                        V3.Notification.success('Review ÂÆåÊàê');
                    }, 1500);
                },
                getScoreColor(score) {
                    if (!score) return 'v3-text-gray';
                    if (score >= 90) return 'v3-text-warning';
                    if (score >= 80) return 'v3-text-primary';
                    if (score >= 70) return 'v3-text-success';
                    return 'v3-text-danger';
                },
                getSubReviewName(key) { return { code: '‰ª£Á†Å', documentation: 'ÊñáÊ°£', progress: 'ËøõÂ∫¶', tests: 'ÊµãËØï' }[key] || key; },
                formatTime(str) { return new Date(str).toLocaleString('zh-CN', { month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' }); }
            }
        }).mount('#app');
    </script>
</body>
</html>
